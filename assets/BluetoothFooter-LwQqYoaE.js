import{c as R,i as $,e as y,l as K,r as b,j as S,a as i,w as f,z as L,n as N,h as w,g as j,q as M,C as O,t as P,u as U,v as A,K as T,N as p,x as V,y as h,bc as D,a_ as E,aL as G,bd as J,Q as W}from"./index-D07Ikl8C.js";import{Q as X}from"./QResizeObserver-hUIvTEDo.js";import{i as Y}from"./common-Bjf4pxll.js";import{u as _}from"./index-BvT20fcg.js";const Z=R({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:v,emit:g}){const{proxy:{$q:r}}=j(),e=$(K,y);if(e===y)return console.error("QFooter needs to be child of QLayout"),y;const s=b(parseInt(a.heightHint,10)),l=b(!0),m=b(S.value===!0||e.isContainer.value===!0?0:window.innerHeight),n=i(()=>a.reveal===!0||e.view.value.indexOf("F")!==-1||r.platform.is.ios&&e.isContainer.value===!0),c=i(()=>e.isContainer.value===!0?e.containerHeight.value:m.value),x=i(()=>{if(a.modelValue!==!0)return 0;if(n.value===!0)return l.value===!0?s.value:0;const t=e.scroll.value.position+c.value+s.value-e.height.value;return t>0?t:0}),q=i(()=>a.modelValue!==!0||n.value===!0&&l.value!==!0),C=i(()=>a.modelValue===!0&&q.value===!0&&a.reveal===!0),z=i(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(a.bordered===!0?" q-footer--bordered":"")+(q.value===!0?" q-footer--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),Q=i(()=>{const t=e.rows.value.bottom,o={};return t[0]==="l"&&e.left.space===!0&&(o[r.lang.rtl===!0?"right":"left"]=`${e.left.size}px`),t[2]==="r"&&e.right.space===!0&&(o[r.lang.rtl===!0?"left":"right"]=`${e.right.size}px`),o});function u(t,o){e.update("footer",t,o)}function d(t,o){t.value!==o&&(t.value=o)}function F({height:t}){d(s,t),u("size",t)}function H(){if(a.reveal!==!0)return;const{direction:t,position:o,inflectionPoint:I}=e.scroll.value;d(l,t==="up"||o-I<100||e.height.value-c.value-o-s.value<300)}function k(t){C.value===!0&&d(l,!0),g("focusin",t)}f(()=>a.modelValue,t=>{u("space",t),d(l,!0),e.animate()}),f(x,t=>{u("offset",t)}),f(()=>a.reveal,t=>{t===!1&&d(l,a.modelValue)}),f(l,t=>{e.animate(),g("reveal",t)}),f([s,e.scroll,e.height],H),f(()=>r.screen.height,t=>{e.isContainer.value!==!0&&d(m,t)});const B={};return e.instances.footer=B,a.modelValue===!0&&u("size",s.value),u("space",a.modelValue),u("offset",x.value),L(()=>{e.instances.footer===B&&(e.instances.footer=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const t=N(v.default,[w(X,{debounce:0,onResize:F})]);return a.elevated===!0&&t.push(w("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),w("footer",{class:z.value,style:Q.value,onFocusin:k},t)}}}),ee={class:"row items-center justify-between q-col-gutter-sm q-px-md q-py-sm"},te={class:"full-height"},ne=M({__name:"BluetoothFooter",setup(a){const{selectedDevice:v}=O(_()),{send:g}=_(),r=b(!1),e=b(),s=Y("layouts.footers.BluetoothFooter"),l=async()=>{e.value&&await g(e.value,r.value)};return(m,n)=>(P(),U(Z,{class:T(["bg-transparent",{"bg-white text-black":!m.$q.dark.isActive,"bg-dark text-white":m.$q.dark.isActive}]),bordered:""},{default:A(()=>[p("div",ee,[V(G,{class:"col-12 col-md-grow",autogrow:"",clearable:"",disable:!h(v).characteristicId,label:h(s)("labels.message"),outlined:"",type:"textarea",modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=c=>e.value=c),onKeydown:D(E(l,["shift","exact","prevent"]),["enter"])},null,8,["disable","label","modelValue","onKeydown"]),p("div",te,[V(J,{disable:!h(v).characteristicId,label:h(s)("labels.hex"),modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=c=>r.value=c)},null,8,["disable","label","modelValue"])]),p("div",null,[V(W,{color:"primary",disable:!h(v).characteristicId||!e.value,icon:"send","no-caps":"",round:"",onClick:l},null,8,["disable"])])])]),_:1},8,["class"]))}});export{ne as default};
