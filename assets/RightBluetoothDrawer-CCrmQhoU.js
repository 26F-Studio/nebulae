import{u as le,Q as ie,a as O,b as oe,c as re}from"./QTabPanels-DfPQGwRk.js";import{c as N,W as ue,X as de,r as T,a as Y,az as ce,z as Z,h as M,b as fe,V as E,g as me,T as he,q as D,C as I,t as C,u as x,v as d,x as l,N as q,E as L,y as b,aJ as A,L as F,G as j,H as U,I as H,U as ee,J as X,D as W,M as pe,Q as B,aQ as te,aL as ve,aY as ge,aZ as be,a_ as J,a$ as ye}from"./index-D07Ikl8C.js";import{Q as _e}from"./QDrawer-DmVqqI9i.js";import{u as we}from"./use-quasar-B7Jyjmql.js";import{Q as G}from"./QItemLabel-DSJgEm51.js";import{Q as ne,a as se,b as R}from"./QList-BqyV-VWZ.js";import{T as ae}from"./format-BAX2mLwj.js";import{i as P}from"./common-Bjf4pxll.js";import{u as V}from"./index-BvT20fcg.js";import{bus as Se}from"./bus--FKyIfPi.js";import"./QResizeObserver-hUIvTEDo.js";import"./rtl-DFPa-2ov.js";import"./selection-DfpBlV27.js";const K=[["left","center","start","width"],["right","center","end","width"],["top","start","center","height"],["bottom","end","center","height"]],$e=N({name:"QSlideItem",props:{...ue,leftColor:String,rightColor:String,topColor:String,bottomColor:String,onSlide:Function},emits:["action","top","right","bottom","left"],setup(y,{slots:n,emit:c}){const{proxy:f}=me(),{$q:s}=f,r=de(y,s),{getCache:m}=le(),h=T(null);let i=null,e={},t={},u={};const g=Y(()=>s.lang.rtl===!0?{left:"right",right:"left"}:{left:"left",right:"right"}),_=Y(()=>"q-slide-item q-item-type overflow-hidden"+(r.value===!0?" q-slide-item--dark q-dark":""));function Q(){h.value.style.transform="translate(0,0)"}function o(a,p,w){y.onSlide!==void 0&&c("slide",{side:a,ratio:p,isReset:w})}function k(a){const p=h.value;if(a.isFirst)e={dir:null,size:{left:0,right:0,top:0,bottom:0},scale:0},p.classList.add("no-transition"),K.forEach(v=>{if(n[v[0]]!==void 0){const z=u[v[0]];z.style.transform="scale(1)",e.size[v[0]]=z.getBoundingClientRect()[v[3]]}}),e.axis=a.direction==="up"||a.direction==="down"?"Y":"X";else if(a.isFinal){p.classList.remove("no-transition"),e.scale===1?(p.style.transform=`translate${e.axis}(${e.dir*100}%)`,i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,c(e.showing,{reset:Q}),c("action",{side:e.showing,reset:Q})},230)):(p.style.transform="translate(0,0)",o(e.showing,0,!0));return}else a.direction=e.axis==="X"?a.offset.x<0?"left":"right":a.offset.y<0?"up":"down";if(n.left===void 0&&a.direction===g.value.right||n.right===void 0&&a.direction===g.value.left||n.top===void 0&&a.direction==="down"||n.bottom===void 0&&a.direction==="up"){p.style.transform="translate(0,0)";return}let w,$,S;e.axis==="X"?($=a.direction==="left"?-1:1,w=$===1?g.value.left:g.value.right,S=a.distance.x):($=a.direction==="up"?-2:2,w=$===2?"top":"bottom",S=a.distance.y),!(e.dir!==null&&Math.abs($)!==Math.abs(e.dir))&&(e.dir!==$&&(["left","right","top","bottom"].forEach(v=>{t[v]&&(t[v].style.visibility=w===v?"visible":"hidden")}),e.showing=w,e.dir=$),e.scale=Math.max(0,Math.min(1,(S-40)/e.size[w])),p.style.transform=`translate${e.axis}(${S*$/Math.abs($)}px)`,u[w].style.transform=`scale(${e.scale})`,o(w,e.scale,!1))}return ce(()=>{t={},u={}}),Z(()=>{i!==null&&clearTimeout(i)}),Object.assign(f,{reset:Q}),()=>{const a=[],p={left:n[g.value.right]!==void 0,right:n[g.value.left]!==void 0,up:n.bottom!==void 0,down:n.top!==void 0},w=Object.keys(p).filter(S=>p[S]===!0);K.forEach(S=>{const v=S[0];n[v]!==void 0&&a.push(M("div",{key:v,ref:z=>{t[v]=z},class:`q-slide-item__${v} absolute-full row no-wrap items-${S[1]} justify-${S[2]}`+(y[v+"Color"]!==void 0?` bg-${y[v+"Color"]}`:"")},[M("div",{ref:z=>{u[v]=z}},n[v]())]))});const $=M("div",{key:`${w.length===0?"only-":""} content`,ref:h,class:"q-slide-item__content"},fe(n.default));return w.length===0?a.push($):a.push(E($,m("dir#"+w.join(""),()=>{const S={prevent:!0,stop:!0,mouse:!0};return w.forEach(v=>{S[v]=!0}),[[ae,k,void 0,S]]}))),M("div",{class:_.value},a)}}}),ke=N({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(y,{slots:n,emit:c}){let f=!1,s,r,m=null,h=null,i,e;function t(){s&&s(),s=null,f=!1,m!==null&&(clearTimeout(m),m=null),h!==null&&(clearTimeout(h),h=null),r!==void 0&&r.removeEventListener("transitionend",i),i=null}function u(o,k,a){k!==void 0&&(o.style.height=`${k}px`),o.style.transition=`height ${y.duration}ms cubic-bezier(.25, .8, .50, 1)`,f=!0,s=a}function g(o,k){o.style.overflowY=null,o.style.height=null,o.style.transition=null,t(),k!==e&&c(k)}function _(o,k){let a=0;r=o,f===!0?(t(),a=o.offsetHeight===o.scrollHeight?0:void 0):(e="hide",o.style.overflowY="hidden"),u(o,a,k),m=setTimeout(()=>{m=null,o.style.height=`${o.scrollHeight}px`,i=p=>{h=null,(Object(p)!==p||p.target===o)&&g(o,"show")},o.addEventListener("transitionend",i),h=setTimeout(i,y.duration*1.1)},100)}function Q(o,k){let a;r=o,f===!0?t():(e="show",o.style.overflowY="hidden",a=o.scrollHeight),u(o,a,k),m=setTimeout(()=>{m=null,o.style.height=0,i=p=>{h=null,(Object(p)!==p||p.target===o)&&g(o,"hide")},o.addEventListener("transitionend",i),h=setTimeout(i,y.duration*1.1)},100)}return Z(()=>{f===!0&&t()}),()=>M(he,{css:!1,appear:y.appear,onEnter:_,onLeave:Q},n.default)}}),Qe={class:"text-h5"},Ce=D({__name:"RecognizedDevices",setup(y){const{connectedDevices:n,recognizedDevices:c}=I(V()),{request:f}=V(),s=T(new Set),r=P("components.bluetooth.panels.RecognizedDevices"),m=async e=>{await(await f(e.services,e.filters))?.connect()},h=(e,t)=>{console.log("key",e),setTimeout(()=>{t.reset()},500)},i=(e,t)=>{s.value.add(e),setTimeout(()=>{t.reset(),delete c.value[e],s.value.delete(e)},500)};return(e,t)=>(C(),x(ee,{bordered:"",class:"q-gutter-y-sm",flat:""},{default:d(()=>[l(A,null,{default:d(()=>[q("div",Qe,L(b(r)("labels.title")),1)]),_:1}),l(F),l(ne,{separator:""},{default:d(()=>[(C(!0),j(H,null,U(b(c),(u,g)=>(C(),x(ke,{key:g},{default:d(()=>[E(l($e,{"left-color":"primary","right-color":"negative",onLeft:_=>h(g,_),onRight:_=>i(g,_)},{left:d(()=>[l(X,{left:"",name:"mdi-pencil"})]),right:d(()=>[l(X,{left:"",name:"mdi-delete"})]),default:d(()=>[l(se,null,{default:d(()=>[l(R,null,{default:d(()=>[l(G,null,{default:d(()=>[W(L(u.name??u.id),1)]),_:2},1024),u.name?.length?(C(),x(G,{key:0,caption:""},{default:d(()=>[W(L(u.id),1)]),_:2},1024)):pe("",!0)]),_:2},1024),l(R,{side:""},{default:d(()=>[l(B,{color:b(n)[u.id]?"grey":"primary",disable:!!b(n)[u.id],icon:b(n)[u.id]?"mdi-check-circle-outline":"mdi-link-plus",label:e.$q.screen.gt.sm?b(r)(`labels.${b(n)[u.id]?"connected":"connect"}`):void 0,"no-caps":"",outline:!!b(n)[u.id],onClick:_=>m(u)},null,8,["color","disable","icon","label","outline","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onLeft","onRight"]),[[te,!s.value.has(g)]])]),_:2},1024))),128))]),_:1})]),_:1}))}}),Te={class:"row justify-between"},xe={class:"text-h5"},ze=D({__name:"SavedMessages",setup(y){const{savedMessages:n,selectedDevice:c}=I(V()),{send:f}=V(),s=T(),r=P("components.bluetooth.panels.SavedMessages"),m=()=>{n.value.push("")},h=(t,u)=>{n.value[t]=u?u.toString():""},i=async t=>{t&&await f(t,!1)},e=t=>{s.value===t?(n.value.splice(t,1),s.value=void 0):s.value=t};return(t,u)=>(C(),x(ee,{bordered:"",class:"q-gutter-y-sm",flat:""},{default:d(()=>[l(A,null,{default:d(()=>[q("div",Te,[q("div",xe,L(b(r)("labels.title")),1),l(B,{label:t.$q.screen.gt.sm?b(r)("labels.newMessage"):void 0,color:"positive",icon:"mdi-text-box-plus-outline","no-caps":"",onClick:m},null,8,["label"])])]),_:1}),l(F),l(ne,{separator:""},{default:d(()=>[(C(!0),j(H,null,U(b(n),(g,_)=>(C(),x(se,{key:_},{default:d(()=>[l(R,{side:""},{default:d(()=>[l(B,{color:"negative",dense:"",icon:s.value!==_?"mdi-delete":"mdi-delete-forever",flat:s.value!==_,round:"",onClick:Q=>e(_),onMouseleave:u[0]||(u[0]=Q=>s.value=void 0)},null,8,["icon","flat","onClick"])]),_:2},1024),l(R,null,{default:d(()=>[l(ve,{autogrow:"",dense:"",outlined:"",type:"text","model-value":g,"onUpdate:modelValue":Q=>h(_,Q)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),l(R,{side:""},{default:d(()=>[l(B,{color:"primary",dense:"",disable:!b(c).characteristicId||!g,icon:"mdi-send",round:"",onClick:Q=>i(g)},null,8,["disable","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}}),Me=D({__name:"ResizeLine",props:ge({maxSize:{},minSize:{},reverse:{type:Boolean,default:!1},snapSize:{},thickness:{default:3},vertical:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(y){const n=y,c=be(y,"modelValue"),f=T(c.value),s=T(!1),r=T(0),m=(n.minSize+n.snapSize)/2,h=i=>{i.isFirst&&(f.value=c.value),!i.isFinal&&!s.value?s.value=!0:i.isFinal&&s.value&&(s.value=!1),s.value&&r.value===0?r.value=1:!s.value&&r.value===1&&(r.value=0);const e=n.vertical?i.offset?.y:i.offset?.x;if(!e)return;const t=f.value+(n.reverse?-1:1)*e;t<m?c.value=n.minSize:t<n.snapSize?c.value=n.snapSize:t>n.maxSize?c.value=n.maxSize:c.value=t};return(i,e)=>E((C(),x(F,{vertical:i.vertical,onMouseenter:e[0]||(e[0]=J(t=>r.value=1,["stop"])),onMouseleave:e[1]||(e[1]=J(t=>r.value=s.value?1:0,["stop"])),style:ye({cursor:"col-resize",opacity:r.value,width:`${i.thickness}px`})},null,8,["vertical","style"])),[[ae,h,void 0,{stop:!0,mouse:!0}]])}}),Re={class:"column"},Ye=D({__name:"RightBluetoothDrawer",setup(y){const{connectedDevices:n,savedMessages:c}=I(V()),{screen:f}=we(),s=[{name:"recognizedDevices",icon:"mdi-devices"},{name:"savedMessages",icon:"mdi-message-bookmark"}],r=T(s[0].name),m=T(f.gt.sm?420:370),h=P("layouts.drawers.RightBluetoothDrawer");return Object.keys(n.value).length?c.value.length&&(r.value=s[1].name):r.value=s[0].name,(i,e)=>(C(),x(_e,{bordered:"","no-swipe-backdrop":"","no-swipe-open":"",side:"right",width:m.value,onHide:e[2]||(e[2]=t=>b(Se).emit("drawer","close","right"))},{default:d(()=>[q("div",Re,[l(ie,{class:"full-height",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t)},{default:d(()=>[(C(),j(H,null,U(s,(t,u)=>l(re,{key:u,icon:t.icon,label:b(h)(`labels.${t.name}`),name:t.name,"no-caps":""},null,8,["icon","label","name"])),64))]),_:1},8,["modelValue"]),l(F),l(oe,{class:"full-height","keep-alive":"","model-value":r.value},{default:d(()=>[l(O,{name:"recognizedDevices"},{default:d(()=>[l(Ce)]),_:1}),l(O,{name:"savedMessages"},{default:d(()=>[l(ze)]),_:1})]),_:1},8,["model-value"])]),E(l(Me,{class:"absolute-left full-height","max-size":b(f).width*.7,"min-size":370,reverse:"","snap-size":370,modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t)},null,8,["max-size","modelValue"]),[[te,!b(f).lt.md]])]),_:1},8,["width"]))}});export{Ye as default};
